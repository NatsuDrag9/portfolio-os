import{r as e}from"./index-DvOVhSYJ.js";function C(i,c,t,n,E){const{fadeOutDuration:s=300,onBeforeClose:u}=E||{},o=e.useRef(null),r=e.useCallback(()=>{s>0?(u==null||u(),o.current=setTimeout(()=>{c()},s)):c()},[s,u,c]),d=e.useCallback(a=>{if(t===null)return;const m=a.target;n!=null&&n.some(v=>{var k;return(k=v.current)==null?void 0:k.contains(m)})||t.current&&!t.current.contains(m)&&r()},[t,n,r]),l=e.useCallback(a=>{a.key==="Escape"&&r()},[r]);e.useEffect(()=>{if(i)return document.addEventListener("mousedown",d,!0),document.addEventListener("keydown",l),()=>{document.removeEventListener("mousedown",d,!0),document.removeEventListener("keydown",l),o.current&&clearTimeout(o.current)}},[i,d,l])}export{C as u};
